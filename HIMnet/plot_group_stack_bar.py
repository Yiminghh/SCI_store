
import matplotlib.pyplot as plt
import numpy as np

"""
zorder: 设置图层位置
"""

bar_width = 0.9
group_width=10
fontsize = 13
font_size=30
font2 = {'family': 'Arial',
         'weight': 'normal',
         'size': font_size,
         }

beta1_tag = ['1.0','1.2','1.4','1.6','1.8','2.0', '2.2','2.4','2.6','2.8','3.0']
x_tag = ['KS','DC','HI','ND','RCNN','MRCNN','HIMnet']
#color_list=['#43b263','#94d695','#26bccf','#a0d9e4','#b1c3e7','#c7afd6','#fdc07c','#fe9a99','#f04b3c','#bc1f24','#bc1f24']
color_list=['#5ea862','#bcde80','#26bccf','#a0d9e4','#c7afd6','#fdc07c','#f04b3c']
#hatch_list=['----','O.O.','//////','OOO', '\\\\\\\\\\\\', 'ooo', '++++', '....','xxxx',  '***','||||']
hatch_list=['xxxx','....','xxxx','....', 'xxxx', '....', 'xxxx', '....','xxxx',  '....','xxxx']
graph_list=[]
index = np.array(range(len(x_tag)),dtype=float)
for i in range(len(x_tag)):
    index[i] = (bar_width+0.05)*i
#%% Grid
graph_list.append('Grid')
HIMnet = [0.594913147, 0.536006348, 0.521074039, 0.400235268, 0.486687821, 0.449513914, 0.322743644, 0.377273792,0.367456887, 0.349007975, 0.221251023]
DC = [0.306891006, 0.281566167, 0.264447645, 0.249995338, 0.238680046, 0.228988183, 0.218077683, 0.207687728, 0.196178146, 0.18425336, 0.179983169]
KS = [0.282588493, 0.255404948, 0.235432529, 0.218173193, 0.203962394, 0.190891668, 0.177967753, 0.166896169, 0.155852969, 0.144863096, 0.140963485]
ND = [0.472624644, 0.428571637, 0.396682498, 0.372063691, 0.352336478, 0.335747899, 0.320641388, 0.30629676, 0.292130548, 0.277890391, 0.272880679]
HI = [0.338134081, 0.309942138, 0.29044361, 0.274134518, 0.260963052, 0.249509429, 0.237400715, 0.225635886, 0.213181733, 0.20047528, 0.19592277]
RCNN = [0.34438635, 0.320853603, 0.305377708, 0.29300122, 0.282806755, 0.273909541, 0.264864183, 0.256357816, 0.247637425, 0.239260521, 0.236371532]
MRCNN = [0.397782743, 0.367453686, 0.345248999, 0.327778884, 0.3121496, 0.298767726, 0.285674276, 0.27242334, 0.260038659, 0.247756892, 0.243536565]
data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])

for x in range(len(x_tag)):
    for y in range(len(beta1_tag)):
        plt.bar(index[x]+group_width*(len(graph_list)-1),
                height=data[x, y],
                bottom=np.sum(data[x, :y]),
                width=bar_width,
                color=color_list[x],
                hatch=hatch_list[y],
                edgecolor='w',
                label='k={}'.format(1.0+0.2*y),
                zorder=10)


#%% Hep
graph_list.append('Hep')
HIMnet = [0.859663222, 0.852745726, 0.837278473, 0.855118071, 0.867026185, 0.853522727, 0.852353754, 0.840629253, 0.8592604, 0.867787393, 0.850000526]
DC = [0.531986023, 0.542440621, 0.553208035, 0.56323445, 0.571489257, 0.579136813, 0.585157665, 0.59048402, 0.594273074, 0.597935382, 0.6001576]
KS = [0.559770995, 0.570533522, 0.581711872, 0.591996079, 0.600281607, 0.60817415, 0.614124494, 0.619693303, 0.623433538, 0.626860215, 0.629106814]
ND = [0.752324649, 0.761444558, 0.769895541, 0.778033117, 0.783680525, 0.788658932, 0.79266813, 0.795508424, 0.797173892, 0.798856614, 0.799780849]
HI = [0.564044108, 0.575303099, 0.587089712, 0.597702814, 0.606331136, 0.614422613, 0.620454284, 0.626246538, 0.630023959, 0.633748105, 0.63596822]
RCNN = [0.792743874, 0.79716429, 0.799749779, 0.80075813, 0.800343672, 0.798637516, 0.797436069, 0.795030673, 0.79268439, 0.790922771, 0.788789071]
MRCNN = [0.824560746, 0.828984034, 0.831867269, 0.832497058, 0.831905462, 0.830296367, 0.829387005, 0.826410237, 0.823932025, 0.821651297, 0.819537945]
data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])

for x in range(len(x_tag)):
    for y in range(len(beta1_tag)):
        plt.bar(index[x]+group_width*(len(graph_list)-1),
                height=data[x, y],
                bottom=np.sum(data[x, :y]),
                width=bar_width,
                color=color_list[x],
                hatch=hatch_list[y],
                edgecolor='w',
                label='k={}'.format(1.0+0.2*y),
                zorder=10)


#%% citeseer
# graph_list.append('Citeseer')
# HIMnet = [0.864328157, 0.876067338, 0.870993842, 0.868253043, 0.876586708, 0.869312552, 0.822874973, 0.843138938, 0.84085253, 0.84880059, 0.854275443]
# DC = [0.598835661, 0.608535262, 0.624572384, 0.638586978, 0.652999321, 0.667026169, 0.679032473, 0.68963285, 0.699780653, 0.7066466, 0.7160054]
# KS = [0.65370349, 0.664460179, 0.679942832, 0.694279814, 0.708377225, 0.722374396, 0.734555187, 0.745191104, 0.755123026, 0.762145958, 0.771508331]
# ND = [0.827343413, 0.8154113, 0.806121702, 0.798228119, 0.788885661, 0.78466734, 0.777874795, 0.771256231, 0.764539946, 0.760100192, 0.752137093]
# HI = [0.644739318, 0.655543563, 0.671310979, 0.685760999, 0.700016497, 0.714461437, 0.726807111, 0.737316596, 0.747701652, 0.754714189, 0.76399888]
# RCNN = [0.71626392, 0.71772634, 0.72145822, 0.72253428, 0.72623183, 0.72659903, 0.72422659, 0.72483247, 0.72291106, 0.72042606, 0.719538706]
# MRCNN = [0.81900113, 0.82499129, 0.83211419, 0.83664992, 0.84212759, 0.84455272, 0.84239581, 0.84192563, 0.84021017, 0.83824245, 0.82843512]
# data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])
#
# for x in range(len(x_tag)):
#     for y in range(len(beta1_tag)):
#         plt.bar(index[x]+group_width*(len(graph_list)-1),
#                 height=data[x, y],
#                 bottom=np.sum(data[x, :y]),
#                 width=bar_width,
#                 color=color_list[x],
#                 hatch=hatch_list[y],
#                 edgecolor='w',
#                 label='k={}'.format(1.0+0.2*y),
#                 zorder=10)

#%% Vidal
graph_list.append('Vidal')
HIMnet = [0.898493174, 0.895410805, 0.872618451, 0.859944759, 0.892067779, 0.874060894, 0.877558973, 0.857168773, 0.842699813, 0.860100905, 0.862186986]
DC = [0.560881805, 0.577869062, 0.594517663, 0.610793643, 0.62427601, 0.634438028, 0.645766972, 0.653959767, 0.661123404, 0.667314478, 0.670351762]
KS = [0.63415655, 0.652404354, 0.670064152, 0.686494014, 0.700172231, 0.711331955, 0.722844869, 0.730722023, 0.73873893, 0.744963476, 0.74926908]
ND = [0.82596993, 0.820706191, 0.816915206, 0.810936442, 0.804988919, 0.801026815, 0.795818654, 0.791639756, 0.789635963, 0.784984921, 0.783950156]
HI = [0.621645641, 0.640312396, 0.65797566, 0.675071036, 0.689133968, 0.700449943, 0.711692912, 0.720401634, 0.728078262, 0.73436098, 0.738379357]
RCNN = [0.805859905, 0.801017262, 0.793959962, 0.783801357, 0.775514569, 0.766964632, 0.759057462, 0.752529088, 0.745289205, 0.740102409, 0.73621078]
MRCNN = [0.842738432, 0.84386809, 0.842473969, 0.834195501, 0.82701823, 0.818577756, 0.810599654, 0.803354954, 0.797031057, 0.791191862, 0.7883791]
data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])

for x in range(len(x_tag)):
    for y in range(len(beta1_tag)):
        plt.bar(index[x]+group_width*(len(graph_list)-1),
                height=data[x, y],
                bottom=np.sum(data[x, :y]),
                width=bar_width,
                color=color_list[x],
                hatch=hatch_list[y],
                edgecolor='w',
                label='k={}'.format(1.0+0.2*y),
                zorder=10)

#%% Sex
graph_list.append('Sex')
HIMnet = [0.895440528, 0.901066306, 0.89132442, 0.884526659, 0.876779261, 0.881540805, 0.876966555, 0.851961973, 0.890265258, 0.877596589, 0.868852097]
DC = [0.6512972, 0.680394478, 0.706499782, 0.727220168, 0.746301816, 0.761568379, 0.774769825, 0.785091179, 0.794036412, 0.801577157, 0.808974192]
KS = [0.699984064, 0.72963509, 0.755815094, 0.77650274, 0.795803764, 0.81086896, 0.823937722, 0.834437092, 0.842874342, 0.850900302, 0.857930193]
ND = [0.839287508, 0.834282025, 0.825503459, 0.81550328, 0.805613496, 0.795790135, 0.787456619, 0.779840304, 0.773729933, 0.767336447, 0.761733268]
HI = [0.687726058, 0.717837836, 0.744676775, 0.765803929, 0.785628147, 0.800919031, 0.81434286, 0.824869874, 0.833412067, 0.841568746, 0.848699515]
RCNN = [0.782035628, 0.785298537, 0.780864626, 0.773159502, 0.765456728, 0.755311129, 0.747567971, 0.740337068, 0.734503055, 0.728150403, 0.724126006]
MRCNN = [0.83655786, 0.834092122, 0.824555878, 0.81215672, 0.80065297, 0.788736454, 0.778940049, 0.771240369, 0.764188038, 0.756903003, 0.751851277]
data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])

for x in range(len(x_tag)):
    for y in range(len(beta1_tag)):
        plt.bar(index[x]+group_width*(len(graph_list)-1),
                height=data[x, y],
                bottom=np.sum(data[x, :y]),
                width=bar_width,
                color=color_list[x],
                hatch=hatch_list[y],
                edgecolor='w',
                label='k={}'.format(1.0+0.2*y),
                zorder=10)


#%% Figeys
graph_list.append('Figeys')
HIMnet = [0.864328157, 0.876067338, 0.870993842, 0.868253043, 0.876586708, 0.869312552, 0.822874973, 0.843138938, 0.84085253, 0.84880059, 0.854275443]
DC = [0.598835661, 0.608535262, 0.624572384, 0.638586978, 0.652999321, 0.667026169, 0.679032473, 0.68963285, 0.699780653, 0.7066466, 0.7160054]
KS = [0.65370349, 0.664460179, 0.679942832, 0.694279814, 0.708377225, 0.722374396, 0.734555187, 0.745191104, 0.755123026, 0.762145958, 0.771508331]
ND = [0.827343413, 0.8154113, 0.806121702, 0.798228119, 0.788885661, 0.78466734, 0.777874795, 0.771256231, 0.764539946, 0.760100192, 0.752137093]
HI = [0.644739318, 0.655543563, 0.671310979, 0.685760999, 0.700016497, 0.714461437, 0.726807111, 0.737316596, 0.747701652, 0.754714189, 0.76399888]
RCNN = [0.71626392, 0.71772634, 0.72145822, 0.72253428, 0.72623183, 0.72659903, 0.72422659, 0.72483247, 0.72291106, 0.72042606, 0.719538706]
MRCNN = [0.81900113, 0.82499129, 0.83211419, 0.83664992, 0.84212759, 0.84455272, 0.84239581, 0.84192563, 0.84021017, 0.83824245, 0.82843512]
data = np.array([KS,DC, HI, ND, RCNN, MRCNN, HIMnet])

for x in range(len(x_tag)):
    for y in range(len(beta1_tag)):
        plt.bar(index[x]+group_width*(len(graph_list)-1),
                height=data[x, y],
                bottom=np.sum(data[x, :y]),
                width=bar_width,
                color=color_list[x],
                hatch=hatch_list[y],
                edgecolor='w',
                label='k={}'.format(1.0+0.2*y),
                zorder=10)

#%%
xx=np.array(range(len(graph_list)))*group_width+0.32*group_width
plt.xticks(xx, graph_list, rotation=30)
plt.yticks([1,3,5,7,9])
#plt.legend(loc=2,borderpad=0.1,bbox_to_anchor=(1.01,1), fontsize=fontsize-1)  # 显示图例


plt.ylabel(r'$\tau$', font2)
plt.tick_params(labelsize=fontsize+8, zorder=30)

# 设置坐标轴粗细
ax=plt.gca()
ax.spines['bottom'].set_linewidth(1.5);###设置底部坐标轴的粗细
ax.spines['left'].set_linewidth(1.5);####设置左边坐标轴的粗细
ax.spines['right'].set_linewidth(1.5);###设置右边坐标轴的粗细
ax.spines['top'].set_linewidth(1.5);####设置上部坐标轴的粗细



plt.gcf().subplots_adjust(left=0.13, right=0.9, bottom=0.18, top=0.96)
plt.show()